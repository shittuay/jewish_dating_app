{% extends "base.html" %}

{% block title %}Welcome - Jewish Dating App{% endblock %}

{% block content %}
{% if g.user %}
<div class="dashboard-layout-with-adverts">
    <div class="side-advert left-advert d-none d-lg-flex">
        {% if left_ad %}
        <a href="{{ url_for('ad_click', ad_id=left_ad['id']) }}" target="_blank">
            <img src="{{ url_for('static', filename=left_ad['image']) }}" alt="Advert" class="side-advert-img">
        </a>
        {% else %}
        <img src="{{ url_for('static', filename='adverts/premium_membership.jpg') }}" alt="Advert" class="side-advert-img">
        {% endif %}
    </div>
    <div class="dashboard-hero">
        <div class="dashboard-card">
            <div class="dashboard-header">
                <img src="{{ url_for('static', filename='uploads/' + (profile.profile_picture if profile and profile.profile_picture else 'default_avatar.png')) }}" class="dashboard-avatar" alt="Profile Picture">
                <h1>Welcome, <span class="username">{{ g.user['username']|capitalize }}</span>!</h1>
                <p class="dashboard-subtitle">Find your perfect match in the Jewish community</p>
            </div>
            <div class="dashboard-actions">
                <div class="dashboard-action-card">
                    <i class="fas fa-user-circle"></i>
                    <h3>My Profile</h3>
                    <p>Update your profile and preferences</p>
                    <a href="{{ url_for('profile') }}" class="btn btn-primary">View Profile</a>
                </div>
                <div class="dashboard-action-card">
                    <i class="fas fa-search"></i>
                    <h3>Browse Profiles</h3>
                    <p>Discover potential matches</p>
                    <a href="{{ url_for('browse_profiles') }}" class="btn btn-primary">Start Browsing</a>
                </div>
                <div class="dashboard-action-card">
                    <i class="fas fa-heart"></i>
                    <h3>My Likes</h3>
                    <p>View your likes and matches</p>
                    <a href="{{ url_for('my_likes') }}" class="btn btn-primary">View Likes</a>
                </div>
                <div class="dashboard-action-card">
                    <i class="fas fa-comments"></i>
                    <h3>Messages</h3>
                    <p>Chat with your matches</p>
                    <a href="{{ url_for('messages') }}" class="btn btn-primary">View Messages</a>
                </div>
            </div>
        </div>
    </div>
    <div class="side-advert right-advert d-none d-lg-flex">
        {% if right_ad %}
        <a href="{{ url_for('ad_click', ad_id=right_ad['id']) }}" target="_blank">
            <img src="{{ url_for('static', filename=right_ad['image']) }}" alt="Advert" class="side-advert-img">
        </a>
        {% else %}
        <img src="{{ url_for('static', filename='adverts/jewish_event.jpg') }}" alt="Advert" class="side-advert-img">
        {% endif %}
    </div>
</div>
{% else %}
<div class="home-hero">
    <div class="home-overlay">
        <h1 class="home-title">Jewish Dating<br>Is Back In Style</h1>
        <a href="{{ url_for('register') }}" class="home-btn">Get Started <i class="fas fa-arrow-right"></i></a>
        <div class="home-info-box">
            <h2>JewishMatch Connect: Connecting Hearts, Building Jewish Futures</h2>
            <p>JewishMatch Connect is the smart dating choice for Jewish singles seeking meaningful relationships. If you're serious about finding a partner who shares your faith and values, JewishMatch Connect is for you. Our dedicated platform and personalized approach make finding your Jewish match easier than ever. Our team of passionate, experienced individuals is committed to your success. Your Jewish love story is our mission.</p>
            <div class="home-features">
                <div class="feature">
                    <span class="feature-icon animated-icon"><i class="fas fa-ribbon"></i></span>
                    <strong>Certified Jewish Match Connectors</strong><br>
                    <span class="feature-desc">Our team understands the nuances of Jewish traditions and values, guiding you with expertise and cultural sensitivity.</span>
                </div>
                <div class="feature">
                    <span class="feature-icon animated-icon"><i class="fas fa-scroll"></i></span>
                    <strong>Dedicated Relationship Coaches</strong><br>
                    <span class="feature-desc">Our experienced coaches offer insights and support to help you build healthy, lasting Jewish relationships.</span>
                </div>
                <div class="feature">
                    <span class="feature-icon animated-icon"><i class="fas fa-shield-alt"></i></span>
                    <strong>Secure Community</strong><br>
                    <span class="feature-desc">Your safety and privacy are paramount. We provide a secure platform to connect with peace of mind.</span>
                </div>
                <div class="feature">
                    <span class="feature-icon animated-icon"><i class="fas fa-ring"></i></span>
                    <strong>Personalized Jewish Introductions</strong><br>
                    <span class="feature-desc">We go beyond just matching; our personalized approach helps you create and nurture a strong Jewish partnership.</span>
                </div>
            </div>

            <!-- Reviews Section - Swiper Slider -->
            <div class="reviews-section">
                <h2>What Our Members Say</h2>
                <div class="swiper">
                    <div class="swiper-wrapper">
                        {% for review in reviews %}
                        <div class="swiper-slide">
                            <div class="review-card">
                                <p class="review-text">"{{ review['review_text'] }}"</p>
                                <div class="review-user">
                                    {% if review['photo'] %}
                                    <img src="{{ url_for('static', filename='uploads/' + review['photo']) }}" alt="{{ review['name'] }}">
                                    {% else %}
                                    <img src="https://ui-avatars.com/api/?name={{ review['name']|urlencode }}&background=4a90e2&color=fff&rounded=true" alt="{{ review['name'] }}">
                                    {% endif %}
                                    <span>{{ review['name'] }}{% if review['location'] %}, {{ review['location'] }}{% endif %}</span>
                                </div>
                            </div>
                        </div>
                        {% else %}
                        <div class="swiper-slide">
                            <p style="color:#888;">No reviews yet. Be the first to share your experience!</p>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <!-- Review Submission Form - Moved inside home-info-box -->
            <div class="review-form-section" style="margin-top: 2rem; background: transparent; box-shadow: none; padding: 0;">
                <h3>Share Your Experience</h3>
                <form action="{{ url_for('submit_review') }}" method="post" enctype="multipart/form-data" class="review-form">
                    <input type="text" name="name" placeholder="Your Name" required class="form-control">
                    <input type="text" name="location" placeholder="Your Location" class="form-control">
                    <textarea name="review_text" placeholder="Your Review" required class="form-control"></textarea>
                    <input type="file" name="photo" accept="image/*" class="form-control">
                    <button type="submit" class="btn btn-primary">Submit Review</button>
                </form>
                <p style="font-size:0.95em; color:#888; margin-top:0.5rem;">Your review will be visible after admin approval.</p>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body {
    background: #f7fafd;
    font-family: 'Nunito', 'Roboto', Arial, sans-serif;
    color: #222;
}
.home-hero {
    min-height: calc(100vh - 220px);
    background: linear-gradient(120deg, #f7fafd 60%, #eaf6fb 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}
.home-overlay {
    width: 100vw;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: none;
    padding: 0;
}
.home-title {
    color: #222;
    font-size: 3.2rem;
    font-weight: 800;
    text-align: center;
    margin-bottom: 1.5rem;
    letter-spacing: -1px;
}
.home-btn {
    background: linear-gradient(90deg, #4a90e2 60%, #ffb6b9 100%);
    color: #fff;
    padding: 1rem 2.5rem;
    border-radius: 2.5rem;
    font-size: 1.4rem;
    font-weight: 700;
    text-decoration: none;
    box-shadow: 0 4px 16px rgba(74,144,226,0.10);
    border: none;
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    margin-bottom: 2.5rem;
    display: inline-block;
}
.home-btn:hover {
    background: linear-gradient(90deg, #357abd 60%, #ffb6b9 100%);
    transform: translateY(-2px) scale(1.04);
    box-shadow: 0 8px 32px rgba(74,144,226,0.13);
}
.home-info-box {
    background: #fff;
    border-radius: 2rem;
    padding: 2.5rem 2.5rem 2rem 2.5rem;
    max-width: 750px;
    margin: 2rem auto 0 auto;
    box-shadow: 0 4px 24px rgba(44,62,80,0.10);
    text-align: center;
    position: relative;
}
.home-info-box h2 {
    color: #222;
    font-size: 2.1rem;
    margin-bottom: 1.2rem;
    font-weight: 800;
    letter-spacing: -0.5px;
}
.home-info-box p {
    color: #555;
    font-size: 1.15rem;
    margin-bottom: 2.2rem;
}
.home-features {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    justify-content: center;
    margin-bottom: 2.5rem;
}
.feature {
    flex: 1 1 220px;
    min-width: 220px;
    max-width: 270px;
    background: none;
    border: none;
    border-radius: 0;
    box-shadow: none;
    padding: 0 1.2rem 0 1.2rem;
    margin-bottom: 1rem;
    text-align: center;
    transition: none;
    margin-right: 0.5rem;
    margin-left: 0.5rem;
}
.feature:hover {
    box-shadow: 0 8px 32px rgba(74,144,226,0.13);
    transform: translateY(-4px) scale(1.03);
    border-color: #4a90e2;
}
.feature-icon {
    font-size: 2.5rem;
    color: #4a90e2;
    margin-bottom: 0.7rem;
    display: block;
}
.feature strong {
    color: #222;
    font-size: 1.15rem;
    font-weight: 700;
}
.feature-desc {
    color: #555;
    font-size: 1.02rem;
    display: block;
    margin-top: 0.3rem;
}
.reviews-section {
    margin: 2.5rem auto 0 auto;
    max-width: 900px;
    background: #fff;
    border-radius: 1.5rem;
    padding: 2rem 2.5rem;
    box-shadow: 0 2px 12px rgba(74,144,226,0.10);
    text-align: center;
}
.reviews-section h2 {
    color: #222;
    font-size: 1.7rem;
    margin-bottom: 2rem;
    font-weight: 800;
}
.reviews-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    justify-content: center;
}
.review-card {
    background: #f7fafd;
    border-radius: 1.2rem;
    padding: 1.5rem 1rem 1rem 1rem;
    box-shadow: 0 1px 6px rgba(74,144,226,0.07);
    max-width: 260px;
    min-width: 200px;
    text-align: center;
    flex: 1 1 220px;
    border: 1.5px solid #eaf6fb;
    transition: box-shadow 0.2s, transform 0.2s;
}
.review-card:hover {
    box-shadow: 0 8px 32px rgba(74,144,226,0.13);
    transform: translateY(-4px) scale(1.03);
    border-color: #4a90e2;
}
.review-text {
    font-style: italic;
    color: #4a90e2;
    margin-bottom: 1rem;
    font-size: 1.08rem;
}
.review-user {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.7rem;
}
.review-user img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #4a90e2;
}
.review-user span {
    color: #222;
    font-weight: 600;
}
.review-form-section {
    margin: 2.5rem auto 0 auto;
    max-width: 500px;
    background: #fff;
    border-radius: 1.5rem;
    padding: 2rem 2.5rem;
    box-shadow: 0 2px 12px rgba(74,144,226,0.10);
    text-align: center;
}
.review-form-section h3 {
    color: #222;
    font-size: 1.2rem;
    margin-bottom: 1rem;
    font-weight: 700;
}
.review-form input,
.review-form textarea {
    margin-bottom: 1rem;
    border-radius: 1rem;
    border: 1.5px solid #eaf6fb;
    background: #f7fafd;
    font-size: 1.05rem;
    padding: 0.8rem 1.1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
}
.review-form input:focus,
.review-form textarea:focus {
    border-color: #4a90e2;
    box-shadow: 0 0 0 0.12rem rgba(74,144,226,0.10);
    outline: none;
}
.btn-primary {
    background: linear-gradient(90deg, #4a90e2 60%, #ffb6b9 100%);
    color: #fff;
    border-radius: 2rem;
    padding: 0.7rem 2rem;
    font-weight: 700;
    font-size: 1.1rem;
    border: none;
    box-shadow: 0 2px 8px rgba(74,144,226,0.10);
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
}
.btn-primary:hover {
    background: linear-gradient(90deg, #357abd 60%, #ffb6b9 100%);
    transform: translateY(-2px) scale(1.04);
    box-shadow: 0 8px 32px rgba(74,144,226,0.13);
}
@media (max-width: 900px) {
    .home-info-box { padding: 1.2rem 0.5rem; }
    .home-features { flex-direction: column; gap: 1.2rem; }
}
.animated-icon {
    display: inline-block;
    transition: transform 0.3s cubic-bezier(.68,-0.55,.27,1.55);
}
.animated-icon:hover {
    transform: scale(1.18) rotate(-8deg);
    animation: icon-bounce 0.7s;
}
@keyframes icon-bounce {
    0% { transform: scale(1) translateY(0); }
    30% { transform: scale(1.2) translateY(-8px); }
    50% { transform: scale(0.95) translateY(2px); }
    70% { transform: scale(1.05) translateY(-4px); }
    100% { transform: scale(1) translateY(0); }
}
/* Swiper custom styles */
.swiper {
    width: 100%;
    padding-bottom: 2.5rem;
}
.swiper-slide {
    display: flex;
    justify-content: center;
    align-items: stretch;
    height: auto;
}
.swiper-pagination-bullet {
    background: #4a90e2;
    opacity: 0.5;
}
.swiper-pagination-bullet-active {
    background: #ffb6b9;
    opacity: 1;
}
</style>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    new Swiper('.swiper', {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        breakpoints: {
            700: { slidesPerView: 2 },
            1100: { slidesPerView: 3 }
        }
    });
});
</script>
{% endblock %} 